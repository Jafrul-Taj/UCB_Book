<div class="flex flex-col w-full h-[70vh]">
    <div class="flex flex-col flex-grow overflow-auto">
        @for(message of messages(); track message.id) {
            <div 
                class="chat"
                [class.chat-start]="!message.currentUserSender"
                [class.chat-end]="message.currentUserSender"
            >
                <div class="chat-image avatar">
                  <div class="w-10 rounded-full">
                    <img
                      alt="image of user"
                      [src]="message.senderImageUrl"
                    />
                  </div>
                </div>
                <div class="chat-header">
                        {{message.senderDisplayname}}
                        <time class="text-xs opacity-50">{{message.messageSent | date:'short'}}</time>
                </div>
                <div class="chat-bubble">{{message.content}}</div>

                @if(message.currentUserSender && !message.dateRead) {
                    <div class="chat-footer opacity-50">Seen {{message.dateRead | timeAgo}}</div>
                } @else if(message.currentUserSender && message.dateRead) {
                    <div class="chat-footer opacity-50">No read</div>
                }@else {
                    <div class="chat-footer opacity-50">Delivered</div>
                }
                
            </div>

            <div class="chat chat-end">
                <div class="chat-image avatar">
                  <div class="w-10 rounded-full">
                    <img
                      alt="Tailwind CSS chat bubble component"
                      src="https://img.daisyui.com/images/profile/demo/anakeen@192.webp"
                    />
                  </div>
                </div>
                <div class="chat-header">
                  Anakin
                  <time class="text-xs opacity-50">12:46</time>
                </div>
                <div class="chat-bubble">I hate you!</div>
                <div class="chat-footer opacity-50">Seen at 12:46</div>
            </div>

        }
    </div>
</div>



